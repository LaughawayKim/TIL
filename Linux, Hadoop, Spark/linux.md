<h1>Linux</h1>

![Linux](linux.assets/linux.jpg)

> **리눅스**([영어](https://ko.wikipedia.org/wiki/영어): Linux)는 [리누스 토르발스](https://ko.wikipedia.org/wiki/리누스_토르발스)가 커뮤니티 주체로 개발한 컴퓨터 [운영 체제](https://ko.wikipedia.org/wiki/운영_체제)이다. 혹은 [커널](https://ko.wikipedia.org/wiki/커널_(컴퓨팅))을 뜻하기도 한다. 리눅스는 [자유 소프트웨어](https://ko.wikipedia.org/wiki/자유_소프트웨어)와 [오픈 소스](https://ko.wikipedia.org/wiki/오픈_소스) 개발의 가장 유명한 표본으로 들 수 있다. 리눅스는 다중 사용자, 다중 작업(멀티태스킹), [다중 스레드](https://ko.wikipedia.org/wiki/멀티스레딩)를 지원하는 [네트워크 운영 체제](https://ko.wikipedia.org/wiki/네트워크_운영_체제)(NOS)이다.

<br>

<br>

# 목차

- [Linux](#1-Linux)
  - [리눅스 구성](#11-리눅스-구성)
  - [리눅스 파티션 구성](#12-리눅스-파티션-구성)
  - [기본 명령어](#13-기본-명령어)
  - [리눅스 파일의 종류](#14-리눅스-파일의-종류)
  - [리눅스 파일 관련 명령어](#15-리눅스-파일-관련-명령어)
  - [vi 편집기(입력모드, 명령모드)](#16-vi-편집기입력모드-명령모드)
- [복습 -1](#2-복습---1)
  - [배시 셸](#21-배시-셸)
  - [표준 파일 디스크립터](#22-표준-파일-디스크립터)
  - [출력 리다이렉션](#23-출력-리다이렉션)
  - [변수](#24-변수)
    - [셸 변수](#241-셸-변수)
    - [환경 변수](#242-환경-변수)
    - [셸변수의 정의(설정)](#243-셸-변수의-정의설정)
    - [정의된 셸변수를 환경변수로 설정](#244-정의된-셸변수를-환경변수로 설정)
    - [환경변수를 다시 셸변수로 바꾸기](#245-환경변수를-다시-셸변수로-바꾸기)
    - [배시 셸에서의 시스템 환경 설정 파일](#246-배시-셸에서의-시스템-환경-설정-파일)
  - [히스토리 기능](#25-히스토리-기능)
  - [ls -l 옵션의 세부 출력 내용](#26-ls--l-옵션의-세부-출력내용)
  - [파일 접근 권한](#27-파일-접근-권한)
    - [변경(chmod)](#271-변경chmod)
    - [기본 접근 권한(umask)](#272-기본-접근-권한umask)
    - [특수 접근 권한(SetUID, SetGID, sticky bit)](#273-특수-접근-권한setuid-setgid-sticky-bit)
  - [프로세스](#28-프로세스)
    - [데몬 프로세스(deamon)](#281-데몬-프로세스deamon)
    - [고아 프로세스(orphan)](#282-고아-프로세스orphan)
    - [좀비 프로세스(zombie, defunct)](#283-좀비-프로세스zombie-defunct)
    - [프로세스 확인](#284-프로세스-확인)
- [복습 -2(요약)](#3-복습---2요약)

<br>

<br>

# 1. Linux

## 1.1 리눅스 구성

- 커널 
  - 프로세스 관리
  - 파일 시스템
  - 장치 관리
  - 메모리 관리
  - 컴퓨터의  모든 자원 초기화와  제어
- 쉘(shell)
  - 사용자 인터페이스로서 명령어 해석
  - 프로그래밍```.sh``` 
  - 리눅스 기본 쉘 - ```bash shell```
- 응용 프로그램

<br>

> ※ 가상 머신 프로그램
>
> PC에 설치되어 있는 운영체제(호스트 OS)에 가상의 시스템을(머신) 생성한 후에 여기에 다른 운영체제(게스트 OS)를 구성할 수 있도록 해주는 프로그램
>
> vmware , virtual box, virtual pc 등이 있다.

<br>

## 1.2. 리눅스 파티션 구성

- `/`: 루트 파티션, 시스템 설정 등 주요 내용 저장

- `/boot`: boot 파티션, 리눅스 부팅 커널 저장
- `swap`: 메모리(RAM)가 부족할 때 사용되는 영역 (RAM의 2배 size 권장)
- `/usr`: 명령어, 응용프로그램 등이 주로 저장
- `/var`: 주로 로그 파일 저장
- `/tmp`: 시스템 사용 중에 발생하는 임시 파일 저장
- `/home/{계정명}` : 사용자의 홈 디렉토리로 사용되는 영역

<br>

## 1.3. 기본 명령어

- `cd`: change directory
- `mkdir`: make directory
- `rm`: remove

- ```date```: 현재 날짜, 시간 출력
- ```clear```: 터미널에서 보이는 화면의 내용을 지우고 커서를 화면 ㅈ돠측 상단으로 이동
- ```man```: 리눅스가 제공하는 명령어들의 사용법 보기
- ```passwd```: 비밀번호 변경
- ```exit```, ```ctrl```+```d```: 터미널 종료

<br>

## 1.4. 리눅스 파일의 종류

- 일반파일, 디렉토리, 심볼릭 파일, 디바이스 파일

  - 하드 링크: 기존 파일에 새로운 파일명을 추가로 생성(inode 값이 동일)
  - 심볼릭 링크: 원본 파일을 가리키는 새로운 파일

- ```dev```: 장치 파일이 담긴 디렉토리 

- ```media```: CD-ROM이나 USB 같은 외부 장치를 연결하는 디렉토리: media

- ```opt``` 추가 패키지가 설치되는 디렉토리

-  ```sys```: 리눅스 커널과 관련된 파일이 저장되어 잇는 디렉토리

- ```run```: 실행중인 서비스와 관련된 파일들이 저장되는 디렉토리

- ```proc```: 프로세스 정보 등 커널 관련 정보가 저장되는 디렉토리

<br>

## 1.5. 리눅스 파일 관련 명령어

- ```file```: 파일의 종류 확인
- ```ls -l```: 현재 디렉토리 내용의 상세 확인
- ```pwd```: 터미널에서 현재 경로(디렉토리) 확인
- ```cd``` ```cd .``` ```cd ..``` ```cd ../..``` ```cd ~```: 디렉토리 이동
- ```ls -a```: 디렉토리 내용의 숨김파일 포함해서 확인
- ```ls -F``` 디렉토리 내용의 파일 종류
- ```dir``` ```vdir```: ls 명령의 심볼릭 링크
- ```mkdir```: 디렉토리 만들기
- ```mkdir -p``` 중간 디렉토리를 자동으로 생성하는 옵션
- ```rmdir``` ```rmdir -p```: 디렉토리 삭제

- ```cat [파일명]``` ```cat -n``: 텍스트 파일의 내용 확인

- ```more [파일명]```, ```less [ 파일명]```: 텍스트 파일의 내용을 화면 단위로 출력

- ```tail [파일명]```: 텍스트 파일의 니용 중 뒷부분만 일부 출력

- ```cp``` ```cp -r``` : 파일, 디렉토리 복사

- ```mv``` : 파일 이동, 파일 이름 변경

- ```rm``` ```rm -r``` : 파일 삭제, 디렉토리 삭제

- ```ln [원본파일] [심볼릭 링크]``` : 하드 링크 파일 생성

- ```ln -s [원본파일] [심볼릭 링크]``` : 심볼릭 링크

  ***```inode```: 파일에 대한 정보를 가지고 있는 특별한 구조체 (파일의 종류, 크기, 소유자, 파일 변경 시간, 피일 상세 정보, 피일 데이터 블록 주소 저장)***

- ```touch```: 빈 파일 생성, 파일의 수정날짜/시각 변경

- ```grep [검색어] [대상파일명]```: 파일의 내용을 검색

- ```find```: 파일 검색

- ```whereis``` ```which``` : 명령어 위치 파악

<br>

## 1.6. vi 편집기(입력모드, 명령모드)

- 입력모드: ```i``` ```a``` ```o```  -> 명령모드: ```esc```
- ```-``` ```k``` : 명령모드에서 커서를 한 행 앞으로
- ```+``` ```j```: 명령모드에서  커서를 한 행 뒤로
- ```:wq``` ```zz```: 저장하고 빠져나오기
- ```q``` ```q!``` : 명령 모드에서 저장 안 하고 vi 종료
- ```행번호G``` ```:행번호```: 명령 모드에서 트정 행으로 이동하려면
- ```x```: 명령 모드에서 커서 위치한 한 글자 삭제
- ```dw```: 명령 모드에서 커서 위치한 한 단어 삭제
- ```dd```: 명령 모드에서 커서 위치한 한 라인 삭제
- ```yy```: 명령 모드에서 커서위차한 한 행 복사
- ```p```: 명령 모드에서 커서 위치한 행 아래 붙여넣기
- ```dd```: 명령 모드에서 커서 위치한 한 행 잘라내기
- ```?검색문자열```: 위 방향으로 특정 문자열 찾기
- ```/검색문자열```: 아래 방향으로 특정 문자열 찾기
- ```:s/문자열1/문자열2/```: 커서가 위치한 행에서 특정 문자열을 다른 문자열로 바꾸기
- ```:%s/문자열1/문자열2/g```: 파일 내용 전체 중 특정 문자열을 다른 문자열로 바꾸기
- ```:r 대상파일```:명령 모드에서 커서가 위치한 행 아래 다른 파일을 읽어들여서 삽입하기
- ```:w``` -> ```:e 대상파일 ```: 명령 모드에서 다른 지정한 파일로 전환하려면
- ```vi test1.txt test2.txt test3.txt``` : test1.txt 편집 후 다음 파일로 전환하려면-> ```:n```
- ```:! 셸명령어```: 편집기 사용 중 셸 명령을 실행시키려면
- ```:sh``` : 편집기 사용 중 셸 명령을 실행시키기 위해 vi  편집기를 빠져나오려면 명령모드에서 사용 (다시 돌아올 때는 ```exit```)

<br>

<br>

# 2. 복습 - 1

## 2.1. 배시 셸

- 배시 셸의 한 줄의 문자열 출력 : ```echo```
- 배시 셸의 한 줄 문자열을 %지시자와 W문자를 이용하여 출력 형식을 지정: ```printf```

<br>

## 2.2. 표준 파일 디스크립터

- 표준입력 파일 디스크립터 : ```stdin``` 0 
- 표준 출력 파일 디스크립터 : ```stdout``` 1
- 표준오류 파일 디스크립터 : ```stderr``` 2

<br>

## 2.3. 출력 리다이렉션

-  ```>```:overwrite, 
- ```>>```:append

```bash
#출력 리다이렉션
ls -l > ls.out
ls -l >> ls.out

#입력 리다이렉션
ls -l < ls.in
```

<br>

## 2.4. 변수

### 2.4.1. 셸 변수 

현재 셸에서만 사용 가능, 서브 셸로는 전달되지 않음

### 2.4.2. 환경 변수

현재 셸에서 사용 가능, 서브 셸로로 전달 가능

```bash
#셸 변수, 환경 변수 모두 출력
set

#환경 변수만 출력
env

```

 환경변수 종류

```HISTSIZE```, ```HOME```, ```LANG```, ```PATH```, ```PWD```, ```SHELL```, ...

### 2.4.3. 셸 변수의 정의(설정)

```bash
변수명=문자열 #공백 없어야 한다
```

### 2.4.4. 정의된 셸변수를 환경변수로 설정

```bash
export 변수명=문자열 #바로 지정
export 변수명 #기존 것 지정
```

### 2.4.5. 환경변수를 다시 셸변수로 바꾸기

```bash
alias 이름='명령' #지정
unalias 이름 #설정 해제
```

### 2.4.6. 배시 셸에서의 시스템 환경 설정 파일

- 공통 환경설정
  - /etc/profile - 모든 셸에 공통으로 적용되는 환경 설정, bash.bashrc 파일을 실행시킴
  - /etc/bash.bashrc - 기본 프롬프트 설정, 시스템 공통으로 적용되는 환경 설정
  - /etc/profile.d/*.sh - 언어나 명령별로 필요한 환경을 설
- 사용자의 환경 설정 파일
  - ~/.profile - 사용자가 정의하는 환경 설정, .bashrc 파일을 실행시킴
  - ~/.bashrc - 히스토리의 크기 설정, alias 설정, 함수 설정
  - ~/.bash_aliases - 사용자가 정의한 alias 를 별도 파일로 저장
  - ~/.bash_logout - 사용자가 logout 할 때 필요한 함수

<br>

## 2.5. 히스토리 기능

- 사용자가 이전에 입력한 명령을 다시 불러와서 사용하려면: `history`
- 바로 직전에 사용했었던 명령을 재실행하려면: ```!!```
- 히스토리에서 해당 번호의 명령을 재실행하려면: ```!번호```
- 히스토리에서 문자열로 시작하는 명령중에서 마지막에 실행된 명령을 재실행하려면: ```!문자열```

<br>

## 2.6. ls -l 옵션의 세부 출력내용

```bash
drwxr-xr-x. 2 hadoop hadoop   6 Aug  8 19:40 Desktop
```

- ```-``` or ```d``` : 파일의 종류
- ```rwxrwxrwx``` : 소유자, 그룹, 아더 파일 접근 권한
- ```숫자``` : 하드링크 갯수
- ```소유자 ID```
- ```소유자의 그룹 이름```
- ```파일 크기```
- ```파일이 마지막 수정된 날짜와 시각```
- ```파일명```

<br>

## 2.7. 파일 접근 권한

### 2.7.1 변경(chmod)

- 하위 디렉토리까지 파일 접근 권한 변경: ```chmod -R```
- 기호 모드 ```+```, ```-```, ```r```, ```w```, ```x```
- 숫자 모드 ```777```, ```644```  등

### 2.7.2. 기본 접근 권한(umask)

- ```umask```는 파일이나 디렉토리 생성 시 부여하지 않을 권한을 지정함

### 2.7.3. 특수 접근 권한(SetUID, SetGID, sticky bit)

- ```SetUID```
  - 맨 앞자리가 ```4```로 설정됨.
  - ```SetUID``` 는 해당 파일이 실행되는 동안에는 파일을 실행한 사용자 권한이 아니라 파일 소유자의 권한으로 실행. 
  - 소유자의 실행 권한에 ```s``` 로 표시됨
-  ```SetGID```
  - 맨 앞자리가 ```2```로 설정됨
  - 해당 파일이 실행되는 동안에는 파일을 실행한 사용자 권한이 아니라 파일 소유자의 그룹권한으로 실행
- ```sticky bit```
  - 디렉토리에 설정
  - 맨 앞자리가 ```1``` 로 설정됨
  - 설정된 디렉토리에는 누구나 파일을 생성 가능, 다른 사용자가 생성한 파일은 삭제 불가 ```ex. /tmp```

<br>

## 2.8. 프로세스

### 2.8.1. 데몬 프로세스(deamon)

- 특정 서비스를 제공하기 위해 존재
- 리눅스 커널에 의해 실행

### 2.8.2. 고아 프로세스(orphan)

자식 프로세스가 아직 실행 중인데 부모 프로세스가 먼저 종료된 프로세스

### 2.8.3. 좀비 프로세스(zombie, defunct)

- 자식 프로세스가 종료했는데도 프로세스가 테이블 목록에 남아 있는 경우
- 좀비 프로세스가 많아지면 새로 프로세스를 실행하지 못 할 수도 있다

### 2.8.4. 프로세스 확인

- 현재 실행 중인 프로세스의 목록을 보는 명령: ```ps```
- 현재 실행 중인 프로세스의 상세 정보 출력: ```-f```
  
- ```UID```, ```PID```, ```PPID```, ```C```, ```STIME```, ```TTY```, ```TIME```, ```CMD```
  
- 터미널에서 실행한 프로세스의 정보 출력 : ```-a```

  - ```STAT 필드``` 

- 현재 실행 중인 프로세스의 메모리 사용량 출력: ```u```

  - ```%CPU```, ```%MEM```, ```VSZ```, ```RSS```, ...

- 현재중인 특정 프로세스 정보 검색 ```pgrep```

- 프로세스 강제 종료

  ```bash
  #방법 1
  kill [-시그널] pid
  
  #방법 2
  pkill 프로세스 이름
  ```


- 작업 관리

  - 현재 실행중인 모든 작업을 보려면 ```jobs```

    백그라운드, 포그라운드 작업

    ```bash
    ctrl + z
    stop %작업번호
    bg %작업번호
    fg %작업번호
    ```

  - 특정 시간에 작업을 수행하도록 예약

    - 한 번만 ```at```

      ```bash
      # at [옵션] 시간
      at 12pm + 2 days
      at 12am tomorrow
      ```

    - 주기적로 실행 ```crontab```

      ```분``` ```시``` ```일``` ```월``` ```요일``` ```작업내용``` 

<br>

<br>

# 3. 복습 - 2(요약)

- 리눅스 고유의 디스크 기반 파일 시스템 종류 : ```ext```, ```ext2```, ```ext3```, ```ext4```, ```XFS```

- 파일 시스템을 디렉토리 계층 구조의 특정 디렉토리와 연결하는 것: ```mount```
- 리눅스 시스템이 부팅 될 때 자동으로 파일 시스템이 마운트되게 하려면: ```/etc/fstab``` 파일에 생성
- 디스크 파티션 생성, 삭제, 보기 등 파티션 관리 명령: ```fdisk```
- 리눅스 시스템이 부팅될 때 스크립트들을 순차적으로 실행시켜서 다른 프로세스를 동작시키는 프로세스: ```init``` 프로세스
- ```init```은 시스템의 단계를 일곱개로 정의, 각 단계별로 셸 스크립트를 실행: ```Run Level```
  - ```0```: 시스템 종료 - ```/etc/rc0.d```
  - ```1```: ```S``` - 응급 복구 모드(싱글 사용자 모드) - ```/etc/rc1.d```
  - ```2```,  ```3```, ```4```: 다중 사용자 모드
  - ```5```: 그래피컬 다중 사용자 모드
  - ```6```: 재시작
- 리눅스 종료:  꺼, ```shotdown```, ```halt```, ```init 0```, ```init 6```, ```reboot```
- 파일을 묶에서 하나로 만드는 것: 아카이브*archive*
  - 다른 시스템과 파일을 주고 받거나, 백업을 하기 위해 여러 파일이나 디렉토리를 하나의 아카이브 파일로 생성, 추출, 업데이트하는 명령: ```tar``` 
  - 새 아카이브 생성: ```tar cvf```
  - 아카이브 파일 내용 확인: ```tar tvf```
  - 아카이브 풀기: ```tar xvf```
  - 아카이브 업데이트: ```tar uvf```
  - 아카이브에 파일 추가: ```tar rvf```
  - 아카이브 생성과 동시에 압축: ```tar cvfz```(gzip), ```tar cvjf```(bzip2)
  - 압축 하기/풀기: ```gzip``` /```gunzip```(.gz), ```bzip2` / ```bunzip2```(.bz)
  - 압축 파일의 내용 보기 : ```zcat``` / ```bzcat```

- 사용자관리
  - 사용자 계정 정보가 저장된 기본 파일:  ```/etc/passwd```
  - 사용자 계정의 암호화된 비밀번호 정보가 저장된 기본 파일: ```/etc/shadow```
  - 사용자가 속한 그룹 정보가 저장된 기본 파일: ```/etc/group```
  - 사용자가 속한 그룹의 암호화된 비밀번호 정보가 저장된 기본 파일: ```/etc/shadow```
  - 사용자 계정 생성: ```useradd```, ```adduser```
  - 사용자 계정 수정: ```usermod```
  - 사용자 계정 삭제: ```userdel```
  - 사용자 계정의 패스워드 에이징 관리: ```chage```
  - 사용자 그룹 생성: ```groupadd```, ```addgroup```
  - 사용자 그룹 수정: ```groupmod```
  - 사용자 그룹 삭제: ```groupdel```
  - 사용자 로그인 정보 확인: ```who```
  - 사용자 이름, 로그인 시각, 로그아웃 시각, 터미널번호, IP 주소 확인: ```last```
  - 사용자 소속된 그룹 확인: ```groups```

- 파일 접근 권한

  - 파일이나 디텍토리의 소유자, 그룹 변경: 

    ```bash
    chown -R 소유자:그룹 ~
    chown 소유자 ~
    chgrp 그룹 ~
    ```

    

